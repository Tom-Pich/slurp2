(()=>{"use strict";function e(e){return document.querySelector(e)}const t=e("#widget-armor-composer");function r(){const r=t.querySelector("[name=armor-size]").selectedOptions[0],a=parseFloat(r.dataset.weight),l=parseFloat(r.dataset.price),o=t.querySelector("[name=armor-type]").value,n=t.querySelector("[name=armor-quality]").value,c=t.querySelector("[name=armor-enchantment]").value;"0"!==o&&t.querySelectorAll("[data-type=armor-type]").forEach((e=>{e.closest("tr").hasAttribute("never-global")||(e.value=o)})),"std"!==n&&t.querySelectorAll("[data-type=armor-quality]").forEach((e=>{e.value=n})),"0"!==c&&t.querySelectorAll("[data-type=armor-enchantment]").forEach((e=>{e.value=c})),t.querySelector("[name=armor-type]").value=0,t.querySelector("[name=armor-quality]").value="std",t.querySelector("[name=armor-enchantment]").value=0;let s=0,u=0;t.querySelectorAll("[data-type=armor-row]").forEach((e=>{const t=e.querySelectorAll("select"),r=t[0].selectedOptions[0],o=t[1].selectedOptions[0],n=t[2].selectedOptions[0],c=e.querySelector("input").checked,i=parseFloat(r.dataset.weight),d=parseFloat(r.dataset.price),p=parseFloat(e.dataset.weight),m=parseFloat(e.dataset.price),y=parseFloat(o.dataset.weight),h=parseFloat(o.dataset.price),q=parseFloat(n.dataset.weight),S=(i*a*p*y*q*(c?.5:1)).toFixed(2),v=Math.round(d*l*m*h*1*(c?.5:1));s+=parseFloat(S),u+=parseInt(v),e.children[1].innerText=S>0?S:"",e.children[2].innerText=v>0?v:""}));const i=e("#armor-total");i.children[1].innerText=Math.round(10*s)/10,i.children[2].innerText=u}t.querySelectorAll("input, select").forEach((e=>{e.addEventListener("change",(()=>r()))})),r()})();