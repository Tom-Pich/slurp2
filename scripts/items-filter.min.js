(()=>{"use strict";var __webpack_modules__={771:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{function qs(e){return document.querySelector(e)}function qsa(e){return document.querySelectorAll(e)}function ce(e,t=[]){const r=document.createElement(e);return t.forEach((e=>r.classList.add(e))),r}function checkPasswordStrength(e){const t=/\d+/.test(e),r=e.length>=8,n=/\W+/.test(e),a=/\s+/.test(e),i=/[A-Z]/.test(e),o=/[a-z]/.test(e);return t&&r&&n&&!a&&i&&o}function calculate(str){if(null===str)return"";let result;str=str.replace(/[+-]+$/g,""),str=str.replace(/[^-\(\)\d/\*+\.]/g,"");try{result=eval(str)}catch(e){result=""}return result=void 0===result?"":result,result}function int(e){return isNaN(parseInt(e))?0:parseInt(e)}function coarseRound(e){let t=!1;return e<0&&(e*=-1,t=!0),e=e<50?Math.round(e):e<200?5*Math.round(e/5):e<500?10*Math.round(e/10):e<2e3?50*Math.round(e/50):100*Math.round(e/100),t&&(e*=-1),e}function trimModifier(e){return(e=e.replace(/\([+-]\d+\)$/g,"")).trimEnd()}function explicitSign(e){return e>0?`+${e}`:`${e}`}__webpack_require__.d(__webpack_exports__,{qs:()=>qs,uJ:()=>qsa})}},__webpack_module_cache__={};function __webpack_require__(e){var t=__webpack_module_cache__[e];if(void 0!==t)return t.exports;var r=__webpack_module_cache__[e]={exports:{}};return __webpack_modules__[e](r,r.exports,__webpack_require__),r.exports}__webpack_require__.d=(e,t)=>{for(var r in t)__webpack_require__.o(t,r)&&!__webpack_require__.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},__webpack_require__.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);var __webpack_exports__={};(()=>{var e,t=__webpack_require__(771),r="undefined"==typeof document?void 0:document,n=!!r&&"content"in r.createElement("template"),a=!!r&&r.createRange&&"createContextualFragment"in r.createRange();function i(e,t){var r,n,a=e.nodeName,i=t.nodeName;return a===i||(r=a.charCodeAt(0),n=i.charCodeAt(0),r<=90&&n>=97?a===i.toUpperCase():n<=90&&r>=97&&i===a.toUpperCase())}function o(e,t,r){e[r]!==t[r]&&(e[r]=t[r],e[r]?e.setAttribute(r,""):e.removeAttribute(r))}var d={OPTION:function(e,t){var r=e.parentNode;if(r){var n=r.nodeName.toUpperCase();"OPTGROUP"===n&&(n=(r=r.parentNode)&&r.nodeName.toUpperCase()),"SELECT"!==n||r.hasAttribute("multiple")||(e.hasAttribute("selected")&&!t.selected&&(e.setAttribute("selected","selected"),e.removeAttribute("selected")),r.selectedIndex=-1)}o(e,t,"selected")},INPUT:function(e,t){o(e,t,"checked"),o(e,t,"disabled"),e.value!==t.value&&(e.value=t.value),t.hasAttribute("value")||e.removeAttribute("value")},TEXTAREA:function(e,t){var r=t.value;e.value!==r&&(e.value=r);var n=e.firstChild;if(n){var a=n.nodeValue;if(a==r||!r&&a==e.placeholder)return;n.nodeValue=r}},SELECT:function(e,t){if(!t.hasAttribute("multiple")){for(var r,n,a=-1,i=0,o=e.firstChild;o;)if("OPTGROUP"===(n=o.nodeName&&o.nodeName.toUpperCase()))o=(r=o).firstChild;else{if("OPTION"===n){if(o.hasAttribute("selected")){a=i;break}i++}!(o=o.nextSibling)&&r&&(o=r.nextSibling,r=null)}e.selectedIndex=a}}};function l(){}function s(e){if(e)return e.getAttribute&&e.getAttribute("id")||e.id}const u=function(t,o,u){if(u||(u={}),"string"==typeof o)if("#document"===t.nodeName||"HTML"===t.nodeName||"BODY"===t.nodeName){var c=o;(o=r.createElement("html")).innerHTML=c}else f=(f=o).trim(),o=n?function(e){var t=r.createElement("template");return t.innerHTML=e,t.content.childNodes[0]}(f):a?function(t){return e||(e=r.createRange()).selectNode(r.body),e.createContextualFragment(t).childNodes[0]}(f):function(e){var t=r.createElement("body");return t.innerHTML=e,t.childNodes[0]}(f);else 11===o.nodeType&&(o=o.firstElementChild);var f,p=u.getNodeKey||s,h=u.onBeforeNodeAdded||l,m=u.onNodeAdded||l,_=u.onBeforeElUpdated||l,v=u.onElUpdated||l,b=u.onBeforeNodeDiscarded||l,g=u.onNodeDiscarded||l,N=u.onBeforeElChildrenUpdated||l,y=u.skipFromChildren||l,w=u.addChild||function(e,t){return e.appendChild(t)},E=!0===u.childrenOnly,C=Object.create(null),A=[];function S(e){A.push(e)}function T(e,t){if(1===e.nodeType)for(var r=e.firstChild;r;){var n=void 0;t&&(n=p(r))?S(n):(g(r),r.firstChild&&T(r,t)),r=r.nextSibling}}function x(e,t,r){!1!==b(e)&&(t&&t.removeChild(e),g(e),T(e,r))}function k(e){m(e);for(var t=e.firstChild;t;){var r=t.nextSibling,n=p(t);if(n){var a=C[n];a&&i(t,a)?(t.parentNode.replaceChild(a,t),q(a,t)):k(t)}else k(t);t=r}}function q(e,t,n){var a=p(t);if(a&&delete C[a],!n){if(!1===_(e,t))return;if(function(e,t){var r,n,a,i,o=t.attributes;if(11!==t.nodeType&&11!==e.nodeType){for(var d=o.length-1;d>=0;d--)n=(r=o[d]).name,a=r.namespaceURI,i=r.value,a?(n=r.localName||n,e.getAttributeNS(a,n)!==i&&("xmlns"===r.prefix&&(n=r.name),e.setAttributeNS(a,n,i))):e.getAttribute(n)!==i&&e.setAttribute(n,i);for(var l=e.attributes,s=l.length-1;s>=0;s--)n=(r=l[s]).name,(a=r.namespaceURI)?(n=r.localName||n,t.hasAttributeNS(a,n)||e.removeAttributeNS(a,n)):t.hasAttribute(n)||e.removeAttribute(n)}}(e,t),v(e),!1===N(e,t))return}"TEXTAREA"!==e.nodeName?function(e,t){var n,a,o,l,s,u=y(e,t),c=t.firstChild,f=e.firstChild;e:for(;c;){for(l=c.nextSibling,n=p(c);!u&&f;){if(o=f.nextSibling,c.isSameNode&&c.isSameNode(f)){c=l,f=o;continue e}a=p(f);var m=f.nodeType,_=void 0;if(m===c.nodeType&&(1===m?(n?n!==a&&((s=C[n])?o===s?_=!1:(e.insertBefore(s,f),a?S(a):x(f,e,!0),a=p(f=s)):_=!1):a&&(_=!1),(_=!1!==_&&i(f,c))&&q(f,c)):3!==m&&8!=m||(_=!0,f.nodeValue!==c.nodeValue&&(f.nodeValue=c.nodeValue))),_){c=l,f=o;continue e}a?S(a):x(f,e,!0),f=o}if(n&&(s=C[n])&&i(s,c))u||w(e,s),q(s,c);else{var v=h(c);!1!==v&&(v&&(c=v),c.actualize&&(c=c.actualize(e.ownerDocument||r)),w(e,c),k(c))}c=l,f=o}!function(e,t,r){for(;t;){var n=t.nextSibling;(r=p(t))?S(r):x(t,e,!0),t=n}}(e,f,a);var b=d[e.nodeName];b&&b(e,t)}(e,t):d.TEXTAREA(e,t)}!function e(t){if(1===t.nodeType||11===t.nodeType)for(var r=t.firstChild;r;){var n=p(r);n&&(C[n]=r),e(r),r=r.nextSibling}}(t);var L,O,M=t,U=M.nodeType,I=o.nodeType;if(!E)if(1===U)1===I?i(t,o)||(g(t),M=function(e,t){for(var r=e.firstChild;r;){var n=r.nextSibling;t.appendChild(r),r=n}return t}(t,(L=o.nodeName,(O=o.namespaceURI)&&"http://www.w3.org/1999/xhtml"!==O?r.createElementNS(O,L):r.createElement(L)))):M=o;else if(3===U||8===U){if(I===U)return M.nodeValue!==o.nodeValue&&(M.nodeValue=o.nodeValue),M;M=o}if(M===o)g(t);else{if(o.isSameNode&&o.isSameNode(M))return;if(q(M,o,E),A)for(var D=0,P=A.length;D<P;D++){var R=C[A[D]];R&&x(R,R.parentNode,!1)}}return!E&&M!==t&&t.parentNode&&(M.actualize&&(M=M.actualize(t.ownerDocument||r)),t.parentNode.replaceChild(M,t)),M};async function c(e,t=null){const r={method:"get"};return t&&(r.method="post",r.body=t),fetch(e,r).then((e=>e.json())).then((e=>e.data))}const f=(0,t.qs)("[data-role=filter-form]"),p=(0,t.uJ)("[name=affichage]"),h=(0,t.qs)("[data-role=range-filter]"),m=(0,t.uJ)("[data-role=origin-selector]"),_=(0,t.qs)("[name=keyword]");let v;function b(){const e=(0,t.uJ)("[data-role=spells-wrapper] .liste"),r=[];m.length?m.forEach((e=>{e.checked&&r.push(e.value)})):r.push("RdB");const n=h.value.split("-"),a=parseInt(n[0]),i=parseInt(n[1]||a);a>i&&([a,i]=[i,a]);const o=_?_.value:"";e.forEach((e=>{const t=w(e.querySelector("summary div:first-of-type").textContent,o)||o.length<=2;e.dataset.nivMin>i||e.dataset.nivMax<a||!r.includes(e.dataset.origin)||!t?e.classList.add("hidden"):e.classList.remove("hidden")})),y()}function g(){if(!_)return;const e=(0,t.uJ)("[data-role=skills-wrapper] .liste"),r=_.value;e.forEach((e=>{w(e.querySelector("summary").textContent,r)||r.length<=2?e.classList.remove("hidden"):e.classList.add("hidden")})),y()}function N(){if(!_)return;const e=(0,t.uJ)("[data-role=avdesavs-wrapper] .liste"),r=_.value;e.forEach((e=>{w(e.querySelector("summary").textContent,r)||r.length<=2?e.classList.remove("hidden"):e.classList.add("hidden")})),y()}function y(){(0,t.uJ)(":is([data-role=avdesavs-wrapper], [data-role=skills-wrapper], [data-role=spells-wrapper]) details:not(.liste)").forEach((e=>{e.querySelectorAll(".liste:not(.hidden)").length?e.classList.remove("hidden"):e.classList.add("hidden")}))}function w(e,t){const r=t.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"");return e.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").includes(r)}function E(){(0,t.uJ)("[data-details]").forEach((e=>{e.closest("details.liste").addEventListener("click",(async e=>{const t=e.target.closest("details.liste").querySelector("[data-details]"),r=parseInt(t.dataset.id);if("spell"===t.dataset.type){const e=await c("/api/get-spell?id="+r);t.innerHTML=e.fullDescription}if("avdesav"===t.dataset.type){const e=await c("/api/get-avdesav?id="+r);t.innerHTML=e.description}}))}))}f.addEventListener("submit",(e=>e.preventDefault())),E(),p.forEach((e=>{e.addEventListener("change",(t=>{const r=new FormData;r.append("affichage",e.value),fetch(f.action,{method:"POST",body:r}).then((e=>e.text())).then((e=>{var t,r;t="main",r=e,new Promise(((e,n)=>{try{const n=(new DOMParser).parseFromString(r,"text/html").querySelector(t),a=document.querySelector(t);u(a,n,{onBeforeElUpdated:function(e,t){if("DETAILS"===e.tagName&&e.id===t.id&&(t.open=e.open),"ignore"===e.dataset.morhpdom)return!1}}),e("DOM updated successfully")}catch(e){n(e)}})),b(),g(),N(),E()}))}))})),h.addEventListener("keyup",(e=>{v&&clearTimeout(v),v=setTimeout(b,500)})),m.forEach((e=>{e.addEventListener("change",(e=>{b()}))})),_&&_.addEventListener("keyup",(e=>{b(),g(),N()}))})()})();