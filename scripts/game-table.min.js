(()=>{"use strict";var __webpack_modules__={771:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{function qs(e){return document.querySelector(e)}function qsa(e){return document.querySelectorAll(e)}function ce(e,t=[]){let a=document.createElement(e);return t&&t.forEach((e=>{a.classList.add(e)})),a}function checkPasswordStrength(e){const t=/\d+/.test(e),a=e.length>=8,n=/\W+/.test(e),r=/\s+/.test(e),s=/[A-Z]/.test(e),o=/[a-z]/.test(e);return t&&a&&n&&!r&&s&&o}function calculate(str){if(null===str)return"";let result;str=str.replace(/[+-]+$/g,""),str=str.replace(/[^-\(\)\d/\*+\.]/g,"");try{result=eval(str)}catch(e){result=""}return result=void 0===result?"":result,result}function int(e){return isNaN(parseInt(e))?0:parseInt(e)}function coarseRound(e){let t=!1;return e<0&&(e*=-1,t=!0),e=e<50?Math.round(e):e<200?5*Math.round(e/5):e<500?10*Math.round(e/10):e<2e3?50*Math.round(e/50):100*Math.round(e/100),t&&(e*=-1),e}function trimModifier(e){return(e=e.replace(/\([+-]\d+\)$/g,"")).trimEnd()}function explicitSign(e){return e>0?`+${e}`:`${e}`}__webpack_require__.d(__webpack_exports__,{Ie:()=>explicitSign,Kf:()=>calculate,ce:()=>ce,e$:()=>int,qs:()=>qs,uJ:()=>qsa})}},__webpack_module_cache__={};function __webpack_require__(e){var t=__webpack_module_cache__[e];if(void 0!==t)return t.exports;var a=__webpack_module_cache__[e]={exports:{}};return __webpack_modules__[e](a,a.exports,__webpack_require__),a.exports}__webpack_require__.d=(e,t)=>{for(var a in t)__webpack_require__.o(t,a)&&!__webpack_require__.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})},__webpack_require__.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);var __webpack_exports__={};(()=>{var e=__webpack_require__(771);const t="site-jdr"===window.location.hostname?"ws://127.0.0.1:1337":"wss://web-chat.pichegru.net:443";class a{constructor(e,t,a,n,r=[],s=null){this.sender=parseInt(e),this.key=t,this.type=a,this.timestamp=Date.now(),this.content=n,this.recipients=r,this.label=s}stringify(){return JSON.stringify(this)}}function n(e){let t,a,n,r,s=0,o=/^(\d+)d(\d{0,3})([+-/*]*)([0-9\.]+)*/.exec(e);if(null===o)s=isNaN(parseInt(e))?0:parseInt(e),t=0,a="",n="+",r=s;else if(t=parseInt(o[1]),a=""!=o[2]?parseInt(o[2]):6,n=""!=o[3]?o[3]:"+",r=null!=o[4]&&""!=o[4]?parseFloat(o[4]):0,1===t&&6===a&&"-"===n&&2===r)s=Math.floor(5*Math.random());else if(1===t&&6===a&&"-"===n&&3===r)s=Math.floor(4*Math.random());else if(1===t&&6===a&&"-"===n&&4===r)s=Math.floor(3*Math.random());else if(1===t&&6===a&&"-"===n&&5===r)s=Math.floor(2*Math.random());else{for(let e=0;e<t;e++)s+=Math.floor(Math.random()*a)+1;switch(n){case"+":s+=r;break;case"-":s-=r;break;case"*":s*=r;break;case"/":s/=r}}let l=`${t}d${6===a?"":a}${n}${r}`;return l=l.replace("+0",""),l=l.replace("-0",""),{expression:l,result:s}}async function r(){let e=new FormData;return e.append("roll",n("3d").result),await fetch("/api/localisation-table",{method:"post",body:e}).then((e=>e.json())).then((e=>e.data))}async function s(e,t,a){if(parseInt(e)&&t){let n="B."+t,r=new FormData;return r.append("for",e),r.append("notes",n),r.append("mains",a),fetch("/api/weapon-damages",{method:"post",body:r}).then((e=>e.json())).then((e=>e.data.damages.slice(2)))}}function o(t){const a=(0,e.qs)(`[data-opponent="${t}"]`);return{name:a.querySelector("[data-type=name]").value||`Protagoniste ${t}`,category:a.querySelector("[data-type=category]").value||"std",dex:a.querySelector("[data-type=dex]").value||0,san:a.querySelector("[data-type=san]").value||0,pdvm:a.querySelector("[data-type=pdvm]").value||0,pdv:a.querySelector("[data-type=pdv]").value||a.querySelector("[data-type=pdvm]").value,painResistance:a.querySelector("[data-type=pain-resistance]").value,members:a.querySelector("[data-type=members]").value}}function l(e,t){const a=e-t;let n=0;18===t?n=-1:17===t?n=e>=16?0:-1:4===t?n=e<=5?0:1:3===t?n=1:a<=-10?n=-1:a>=10&&t<=7&&(n=1);let r=a>=0?"ðŸŸ¢":"ðŸ”´";return-1===n&&(r="ðŸ˜–"),1===n&&(r="ðŸ˜Ž"),{MR:a,symbol:r,critical:n}}async function c(e,t){return fetch(e,{method:"post",body:t}).then((e=>e.json())).then((e=>e.data))}const d=(0,e.qs)("#chat-input-wrapper"),p=parseInt(d.dataset.id),i=d.dataset.login,u=d.dataset.key,m=(0,e.qs)("#connected-users"),y=(0,e.qs)("#chat-dialog-wrapper"),v=(0,e.uJ)("[data-role=emoji-button]"),g=(0,e.qs)("#msg-input"),h=new WebSocket(t);let b={},f=0,$=0,q="[]";function _(t,r=null){const s=/^\/(\d+,){0,10}\d+/.exec(g.value);let o=[];s&&(o=s[0].substring(1).split(","),o=o.map((e=>parseInt(e))),g.value=g.value.replace(s[0],"").trim());const c=g.value.match(/#\d{1,2}([+-]\d{1,2})?(?=\s|$)/g),d=g.value.match(/#(\d+)d(\d{0,3})([+-/*]*)([0-9\.]+)*/g);if(c){const t=[];c.forEach((e=>{console.log(e),t.push(e.replace("#",""))})),t.forEach((a=>{const s=n("3d").result;console.log(a);const o=l((0,e.Kf)(a),s),c=`[ ${a} â†’ ${s} (MR ${o.MR} ${o.symbol}) ]`;g.value=g.value.replace(`#${a}`,c),1===t.length&&null===d&&(r=o.symbol)}))}if(d){const e=[];d.forEach((t=>{console.log(t),e.push(t.replace("#",""))})),e.forEach((e=>{const t=`[ ${e} â†’ ${n(e).result} ]`;g.value=g.value.replace(`#${e}`,t)}))}(c||d)&&(t="chat-roll");const i=new a(p,u,t,g.value,o,r);h.send(i.stringify()),g.value=""}h.onopen=()=>{let e=new a(p,u,"chat-init",i);h.send(e.stringify())},h.onmessage=t=>{const a=JSON.parse(t.data);if(console.log(a),"chat-users"===a.type){b=a.content;const e=[];Object.entries(b).forEach((([t,a])=>{a.isConnected&&e.push(`${a.login} (${t})`)})),m.innerText=e.join(", "),void 0===a.isDeconnection&&new Audio("/assets/notifs/user-log.mp3").play()}if("chat-message"===a.type||"chat-roll"===a.type){const t=JSON.stringify(a.recipients),n=(0,e.ce)("div",["chat-message-wrapper"]),r=(0,e.ce)("div",["chat-message-header"]),s=(0,e.ce)("div",["chat-message-content"]);if("chat-roll"===a.type&&s.classList.add("chat-roll"),a.sender===p&&n.classList.add("self-message"),a.sender!==p&&n.classList.add("bg-color-user-"+(a.sender%7+1)),a.sender===f&&t===q&&a.timestamp-$<15e3&&n.classList.add("same-routing"),a.recipients.length>0&&n.classList.add("is-private"),a.sender!==p&&(r.innerText=b[a.sender].login),a.recipients.length){const e=[];a.recipients.forEach((t=>{const a=void 0===b[t]?"?":b[t].login;e.push(a)})),r.innerText+=` (Ã  ${e.join(", ")})`}const o=new Date(a.timestamp).toLocaleTimeString("fr-FR");r.innerText+=` ${o}`,s.innerHTML=a.content,n.append(r,s),y.append(n);let l=null;"chat-message"===a.type&&a.sender!==p&&(l="message.mp3"),"chat-roll"===a.type&&(l="dice-roll.mp3"),"ðŸ˜Ž"===a.label&&(l="roll-critical-success.mp3"),"ðŸŸ¢"===a.label&&(l="roll-success.mp3"),"ðŸ”´"===a.label&&(l="roll-failure.mp3"),"ðŸ˜–"===a.label&&(l="roll-critical-failure.mp3"),a.recipients.length&&(l="secret.mp3"),"history"===a.label&&(l=null),null!==l&&new Audio("/assets/notifs/"+l).play(),y.scrollHeight-(y.offsetHeight+y.scrollTop)<250&&setTimeout((()=>{y.scrollTop=y.scrollHeight-y.offsetHeight+5}),200),f=a.sender,$=a.timestamp,q=t}},g.addEventListener("keydown",(function(e){13!==e.keyCode||e.shiftKey?13===e.keyCode&&(g.value+="Â¬",console.log(g)):(e.preventDefault(),_("chat-message"))})),v.forEach((e=>{e.addEventListener("click",(e=>{g.value+=e.target.innerText,g.focus()}))}));const w=(0,e.uJ)("fieldset[data-name]"),S=(0,e.uJ)("#widgets-container form"),k=(0,e.qs)("[data-name=simple-roll] form"),E=(0,e.qs)("[data-name=widget-reaction] form"),L=(0,e.uJ)("[data-name=score-tester] form"),I=(0,e.qs)("[data-name=widget-damage-location] form"),x=(0,e.qs)("[data-name=wound-effect] form"),j=(0,e.qs)("[data-name=widget-criticals] form"),M=(0,e.uJ)("[data-role=opponent-wrapper]"),D=(0,e.uJ)("[data-type=name-selector]");S.forEach((e=>{e.addEventListener("submit",(e=>{e.preventDefault()}))})),k.addEventListener("submit",(e=>{let t=n(k.querySelector("[data-type=dice-expression]").value);g.value+=`${t.expression} â†’ ${t.result}`,_("chat-roll")})),E.addEventListener("submit",(async t=>{const a=(0,e.e$)(E.querySelector("[data-type=reaction-modifier]").value),r=n("1d").result+a;let s=new FormData;s.append("reaction-test",r);let o=await c("/api/reaction-test",s);g.value+=`Jet de rÃ©action (${r}) â†’ ${o}`,_("chat-roll")})),L.forEach((t=>{const a=t.querySelector("[data-type=skill-name]"),r=a.dataset.skillNumber,s=t.querySelector("[data-type=score]");a.value=localStorage.getItem(`skill-${r}-name`),s.value=localStorage.getItem(`skill-${r}-score`),["keyup","change"].forEach((e=>{t.addEventListener(e,(e=>{localStorage.setItem(`skill-${r}-name`,a.value),""===a.value&&(s.value=""),localStorage.setItem(`skill-${r}-score`,s.value)}))})),t.addEventListener("submit",(r=>{const o=a.value,c=parseInt(s.value);if(isNaN(c)||""===o)return;let d=parseInt(t.querySelector("[data-type=modif]").value);d=(0,e.e$)(d);const p=c+d,i=n("3d").result,u=l(p,i),m=0===d?"":(0,e.Ie)(d);g.value+=`${o} (${c}${m}) â†’ ${i} (MR ${u.MR} ${u.symbol})`,_("chat-roll",u.symbol)}))}));const T=I.querySelector("[data-type=strength]"),N=I.querySelector("[data-type=weapon-code]"),R=I.querySelector("[data-type=hands]"),F=I.querySelector("[data-type=dice-code]");T.addEventListener("keyup",(async e=>{F.value=await s(T.value,N.value,R.value)})),N.addEventListener("keyup",(async e=>{F.value=await s(T.value,N.value,R.value)})),R.addEventListener("change",(async e=>{F.value=await s(T.value,N.value,R.value)})),I.addEventListener("submit",(async e=>{const t=n(F.value),a=await r();x.querySelector("[data-type=raw-dmg]").value=t.result,x.querySelector("[data-type=localisation]").value=a[1],g.value+=`DÃ©gÃ¢ts (${t.expression})&nbsp;: ${t.result} â€“ ${a[0]}`,_("chat-roll")})),j.addEventListener("submit",(async e=>{const t=j.querySelector("[data-type=critical-categories]").value;let a=new FormData;a.append("table",t),a.append("roll-3d",n("3d").result),a.append("roll-1d",n("1d").result);const r=await c("/api/critical-tables",a);g.value+=`${r}`,_("chat-roll")}));const J=(0,e.qs)("#burst-widget");J.addEventListener("submit",(async e=>{const t=J.querySelector("[data-type=rcl]").value,a=J.querySelector("[data-type=fired-bullets]").value,s=J.querySelector("[data-type=mr]").value,o=J.querySelector("[data-type=damage-dices]").value;let l=new FormData;l.append("rcl",t),l.append("bullets",a),l.append("mr",s);const c=await fetch("/api/burst-hits",{method:"post",body:l}).then((e=>e.json())).then((e=>e.data));let d=[];for(let e=0;e<c;e++){const e=n(o).result,t=await r();d.push(`${e} â€“ ${t}`)}let p=`<b>Rafale&nbsp;:</b> Rcl ${t} â€“ Balles ${a} â€“ MR ${s}`;d.forEach(((e,t)=>{p+=`<br><b>${t+1}.</b> ${e}`})),g.value+=p,_("chat-roll")})),M.forEach((t=>{const a=t.dataset.opponent,n=t.querySelector("[data-type=name]"),r=t.querySelector("[data-type=category]"),s=t.querySelector("[data-type=dex]"),o=t.querySelector("[data-type=san]"),l=t.querySelector("[data-type=pain-resistance]"),c=t.querySelector("[data-type=pdvm]"),d=t.querySelector("[data-type=pdv]"),p=t.querySelector("[data-type=members]");n.value=localStorage.getItem(`opponent-${a}-name`),r.value=localStorage.getItem(`opponent-${a}-category`)||"std",s.value=localStorage.getItem(`opponent-${a}-dex`),o.value=localStorage.getItem(`opponent-${a}-san`),l.value=localStorage.getItem(`opponent-${a}-pain-resistance`),c.value=localStorage.getItem(`opponent-${a}-pdvm`),d.value=localStorage.getItem(`opponent-${a}-pdv`),p.value=localStorage.getItem(`opponent-${a}-members`),t.addEventListener("keyup",(e=>{"name"===e.target.dataset.type&&""===e.target.value&&(["name","category","dex","san","pain-resistance","pdvm","pdv","members"].forEach((e=>{t.querySelector(`[data-type=${e}]`).value="",localStorage.removeItem(`opponent-${a}-${e}`)})),t.querySelector("[data-type=category]").value="std");const n=e.target.dataset.type,r=e.target.value;localStorage.setItem(`opponent-${a}-${n}`,r)})),t.addEventListener("change",(e=>{"category"===e.target.dataset.type&&localStorage.setItem(`opponent-${a}-category`,e.target.value)})),n.addEventListener("keyup",(e=>{D.forEach((e=>{e.options[a-1].innerText=""!==n.value?n.value:`Protagoniste ${a}`}))})),n.dispatchEvent(new Event("keyup")),c.addEventListener("blur",(e=>{""===d.value&&(d.value=c.value)})),d.addEventListener("blur",(t=>{d.value=(0,e.Kf)(d.value)}))}));const H=(0,e.qs)("#general-state-widget");H.addEventListener("submit",(e=>{const t=o(H.querySelector("[data-type=name-selector]").value),a=new FormData;a.append("san",t.san),a.append("pdvm",t.pdvm),a.append("pdv",t.pdv),a.append("pain-resistance",t.painResistance),a.append("members",t.members),fetch("/api/general-state",{method:"post",body:a}).then((e=>e.json())).then((e=>{let a=`\n\t\t\t\tÃ‰tat gÃ©nÃ©ral de <b>${t.name}</b><br>\n\t\t\t\t${e.data.general}\n\t\t\t`;if(void 0!==e.data.members)for(const[t,n]of Object.entries(e.data.members))a+=`<br>${t}&nbsp;: ${n}`;g.value+=a,_("chat-roll")}))})),x.addEventListener("submit",(t=>{const a=x.querySelector("[data-type=name-selector]").value,r=o(a),s=n(x.querySelector("[data-type=raw-dmg]").value).result,l=x.querySelector("[data-type=rd]").value,c=x.querySelector("[data-type=dmg-type]").value,d=x.querySelector("[data-type=bullet-type]").value,p=x.querySelector("[data-type=localisation]").value,i=[];for(let e=0;e<7;e++)i.push(n("3d").result);if(parseInt(r.dex)<=0||parseInt(r.san)<=0||parseInt(r.pdvm)<=0)return g.value+="Data opposants manquantes",void _("chat-roll");const u=new FormData;u.append("category",r.category),u.append("dex",r.dex),u.append("san",r.san),u.append("pdvm",r.pdvm),u.append("pdv",r.pdv),u.append("pain-resistance",r.painResistance),u.append("raw-dmg",s||0),u.append("rd",l||0),u.append("dmg-type",c),u.append("bullet-type",d),u.append("localisation",p),u.append("rolls",i),fetch("/api/wound-effects",{method:"post",body:u}).then((e=>e.json())).then((t=>{const n=t.data;if(n.pdvm<=0)throw new Error("Il manque des donnÃ©es.");let s=`<b>${r.name} â€“ ${n["dÃ©gÃ¢ts bruts"]} ( ${n["type dÃ©gÃ¢ts"]} ${n.localisation})</b>`,o=!0;s+=`<br>DÃ©gÃ¢ts effectifs&nbsp;: ${n["dÃ©gÃ¢ts effectifs"]}`,n.recul&&(s+=`<br>Recul de ${n.recul}&nbsp; m.`),n.mort&&(s+=`<br>${n.mort}`,o=!1),o&&(n["autres effets"]&&(s+=`<br>${n["autres effets"]}`),n["sonnÃ©"]&&!n["perte de conscience"]&&(s+=`<br>${n["sonnÃ©"]}`),n["perte de conscience"]&&(s+="<br>Le personnage perd conscience."),n.chute&&!n["perte de conscience"]&&(s+="<br>Le personnage chÃ»te."),n["dÃ©gÃ¢ts membre"]&&(s+=`<br>${n["dÃ©gÃ¢ts membre"]}`,""!==n["Ã©tat membre"]&&(s+=` (${n["Ã©tat membre"]})`))),g.value+=s,_("chat-roll"),(0,e.qs)(`[data-opponent="${a}"]`).querySelector("[data-type=pdv]").value=n.pdv}))}));const O=x.querySelector("[data-type=dmg-type]"),P=x.querySelector("[data-type=bullet-type]");O.addEventListener("change",(e=>{["b0","b1","b2","b3"].includes(O.value)?P.disabled=!1:(P.value="std",P.disabled=!0)}));const C=(0,e.qs)(["[data-name=fright-check] form"]);C.addEventListener("submit",(async t=>{const a=C.querySelector(["[data-type=fright-level]"]).value,r=(0,e.e$)(C.querySelector(["[data-type=sf-score]"]).value),s=(0,e.e$)(C.querySelector(["[data-type=sf-modif]"]).value),o=(0,e.e$)(C.querySelector(["[data-type=san-score]"]).value),d=r+s;if(r<=0||o<=0&&a>=5)return void t.preventDefault();const p=new FormData,i=l(d,n("3d").result),u=[];for(let e=0;e<=6;e++)u.push(n("3d").result);p.append("fright-level",a),p.append("sf-score",r),p.append("san-score",o),p.append("frightcheck-MR",i.MR),p.append("frightcheck-symbol",i.symbol),p.append("frightcheck-critical",i.critical),p.append("rolls",u.join(","));let m=await c("/api/fright-check",p);g.value=m,_("chat-roll",i.symbol)})),(0,e.qs)("#explosion-widget").addEventListener("submit",(t=>{const a=(0,e.qs)("[data-type=explosion-dmg]").value,r=(0,e.qs)("[data-type=explosion-distance]").value,s=(0,e.qs)("[data-type=explosion-frag-surface]").value,o=(0,e.qs)("[data-type=explosion-frag-device]").checked,l=(n(a).result+n(a).result+n(a).result)/3*1.43,c=new FormData;c.append("damages",l),c.append("distance",r),c.append("fragmentation-surface",s),c.append("is-fragmentation-device",o),fetch("/api/explosion-damages",{method:"post",body:c}).then((e=>e.json())).then((e=>{const t=e.data,a=`<b>Explosion&nbsp;:</b> dÃ©gÃ¢ts ${t.damages} â€“ fragment(s) ${t.fragments} â€“ hauteur de chute ${t.height}&nbsp;m`;g.value+=a,_("chat-roll")}))}));const A=(0,e.qs)("[data-type=object-damages-object-type]"),K=(0,e.qs)("[data-type=object-damages-localisation-options]");A.addEventListener("change",(t=>{const a=new FormData;a.append("object-type",A.value),fetch("/api/object-localisation-options",{method:"post",body:a}).then((e=>e.json())).then((t=>{K.innerHTML="",t.data.forEach((t=>{t=t.charAt(0).toUpperCase()+t.slice(1);const a=(0,e.ce)("option");a.innerText=t,K.appendChild(a)}))}))})),(0,e.qs)("#object-damages-widget").addEventListener("submit",(t=>{const a=(0,e.qs)("[data-type=object-damages-pdsm]").value,r=(0,e.qs)("[data-type=object-damages-pds]").value,s=(0,e.qs)("[data-type=object-damages-integrite]").value,o=(0,e.qs)("[data-type=object-damages-rd]").value,l=n((0,e.qs)("[data-type=object-damages-damages-code]").value).result;if(isNaN(parseInt(a))||isNaN(parseInt(s))||isNaN(parseInt(l)))return;const c=new FormData;c.append("pdsm",a),c.append("pds",r),c.append("integrite",s),c.append("rd",o),c.append("dmgValue",l),c.append("dmgType",(0,e.qs)("[data-type=object-damages-damages-type]").value),c.append("objectType",A.value),c.append("localisation",K.value),c.append("rolls",[n("3d").result,n("3d").result,n("3d").result,n("3d").result]),fetch("/api/object-damages-effects",{method:"post",body:c}).then((e=>e.json())).then((t=>{const a=t.data;console.log(a),(0,e.qs)("[data-type=object-damages-pds]").value=a.pds;let n=`\n\t\t\t\t<b>DÃ©gÃ¢ts ${a.objectType}</b><br>\n\t\t\t\tPdSm&nbsp;: ${a.pdsm} â€“ RD&nbsp;: ${a.rd}<br>\n\t\t\t\tDÃ©gÃ¢ts&nbsp;: ${a.netDamages} (${a.damagesLevel})<br>\n\t\t\t\tPdS restant&nbsp;: ${a.pds} (${a.stateLevel})\n\t\t\t`;if(a.sideEffects.length){n+="<br>";for(let e of a.sideEffects)n+=`â€¢&nbsp;${e[0]} niv. ${e[1]}<br>`}g.value+=n,_("chat-roll")}))})),(0,e.qs)("#vehicle-collision-widget").addEventListener("submit",(t=>{const a=parseInt((0,e.qs)("[data-type=vehicle-collision-pdsm]").value),r=(0,e.qs)("[data-type=vehicle-collision-severity]"),s=parseInt(r.value),o=r.options[r.selectedIndex].innerText;if(!a)return;let l;switch(s){case 1:l=Math.round((15+n("3d").result)/100*a);break;case 2:l=Math.round((40+n("3d").result)/100*a);break;case 3:l=Math.round((90+n("3d").result)/100*a);break;case 4:l=Math.round((180+n("6d").result)/100*a);break;case 5:l="vÃ©hicule dÃ©truit";break;default:l=0}const c=`<b>Collision</b> ${o}&nbsp;: dÃ©gÃ¢ts ${l}`;g.value+=c,_("chat-roll")}));const z=(0,e.qs)("[data-name=npc-generator] form");z.addEventListener("submit",(async e=>{const t=z.querySelector("[data-type=gender]").value,a=z.querySelector("[data-type=region]").value,n=z.querySelector("[data-type=profile]").value,r=new FormData;r.append("gender",t),r.append("region",a),r.append("profile",n);let s=await c("/api/npc-generator",r);if(s.error)return g.value+="ParamÃ¨tres PNJ invalides",void _("chat-roll");const o=s.facialHair?`${s.facialHair},`:"",l="moyenne"!==s.corpulence?`${s.corpulence}, `:"",d="moyenne"!==s.size?`${s.size}, `:"",p="moyenne"!==s.beauty?`${s.beauty}, `:"",i="moyenne"!==s.intelligence?`${s.intelligence}, `:"",u=s.specialTraits?`<br>Choisir une particularitÃ© parmi&nbsp;: <i>${s.specialTraits}</i>`:"";g.value+=`\n\t\t<b>${s.name}</b><br>\n\t\t${s.hair},\n\t\t${o}\n\t\tyeux ${s.eyes},\n\t\t${l}\n\t\t${d}\n\t\t${p}\n\t\t${i}\n\t\t${s.social}\n\t\t${u}\n\t`,_("chat-roll")}));const B=(0,e.qs)("[data-role=widget-choices]"),W=(0,e.qs)("[data-role=widget-choices] template"),U=JSON.parse(localStorage.getItem("display-widgets"))||{"simple-roll":!0,"score-tester":!0,"widget-damage-location":!0,"widget-criticals":!0};function V(){w.forEach((e=>{e.hidden=!U[e.dataset.name]}))}w.forEach((e=>{const t=W.content.cloneNode(!0),a=t.querySelector("input");a.dataset.name=e.dataset.name,U[e.dataset.name]&&(a.checked=!0),a.addEventListener("change",(e=>{U[a.dataset.name]=a.checked,localStorage.setItem("display-widgets",JSON.stringify(U)),V()})),t.querySelector("span").innerHTML=e.querySelector("legend").innerHTML,B.appendChild(t)})),V()})()})();