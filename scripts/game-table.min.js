(()=>{"use strict";var __webpack_modules__={771:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{function checkPasswordStrength(e){const t=/\d+/.test(e),a=e.length>=8,n=/\W+/.test(e),r=/\s+/.test(e),s=/[A-Z]/.test(e),o=/[a-z]/.test(e);return t&&a&&n&&!r&&s&&o}function calculate(str){if(null===str)return"";let result;str=str.replace(/[+-]+$/g,""),str=str.replace(/[^-\(\)\d/\*+\.]/g,"");try{result=eval(str)}catch(e){result=""}return result=void 0===result?"":result,result}function int(e){return isNaN(parseInt(e))?0:parseInt(e)}function coarseRound(e){let t=!1;return e<0&&(e*=-1,t=!0),e=e<50?Math.round(e):e<200?5*Math.round(e/5):e<500?10*Math.round(e/10):e<2e3?50*Math.round(e/50):100*Math.round(e/100),t&&(e*=-1),e}function trimModifier(e){return(e=e.replace(/\([+-]\d+\)$/g,"")).trimEnd()}function explicitSign(e){return e>0?`+${e}`:`${e}`}__webpack_require__.d(__webpack_exports__,{Ie:()=>explicitSign,Kf:()=>calculate,e$:()=>int})}},__webpack_module_cache__={};function __webpack_require__(e){var t=__webpack_module_cache__[e];if(void 0!==t)return t.exports;var a=__webpack_module_cache__[e]={exports:{}};return __webpack_modules__[e](a,a.exports,__webpack_require__),a.exports}__webpack_require__.d=(e,t)=>{for(var a in t)__webpack_require__.o(t,a)&&!__webpack_require__.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})},__webpack_require__.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);var __webpack_exports__={};(()=>{function e(e){return document.querySelector(e)}function t(e){return document.querySelectorAll(e)}function a(e,t=[]){const a=document.createElement(e);return t.forEach((e=>a.classList.add(e))),a}var n=__webpack_require__(771);function r(e){let t,a,n,r,s=0,o=/^(\d+)d(\d{0,3})([+-/*]*)([0-9\.]+)*/.exec(e);if(null===o)s=isNaN(parseInt(e))?0:parseInt(e),t=0,a="",n="+",r=s;else if(t=parseInt(o[1]),a=""!=o[2]?parseInt(o[2]):6,n=""!=o[3]?o[3]:"+",r=null!=o[4]&&""!=o[4]?parseFloat(o[4]):0,1===t&&6===a&&"-"===n&&2===r)s=Math.floor(5*Math.random());else if(1===t&&6===a&&"-"===n&&3===r)s=Math.floor(4*Math.random());else if(1===t&&6===a&&"-"===n&&4===r)s=Math.floor(3*Math.random());else if(1===t&&6===a&&"-"===n&&r<=5)s=Math.floor(2*Math.random());else{for(let e=0;e<t;e++)s+=Math.floor(Math.random()*a)+1;switch(n){case"+":s+=r;break;case"-":s-=r;break;case"*":s*=r;break;case"/":s/=r}}let l=`${t}d${6===a?"":a}${n}${r}`;return l=l.replace("+0",""),l=l.replace("-0",""),{expression:l,result:s}}async function s(){let e=new FormData;return e.append("roll",r("3d").result),await fetch("/api/localisation-table",{method:"post",body:e}).then((e=>e.json())).then((e=>e.data))}async function o(e,t,a){if(parseInt(e)&&t){let n="B."+t,r=new FormData;return r.append("for",e),r.append("notes",n),r.append("mains",a),fetch("/api/weapon-damages",{method:"post",body:r}).then((e=>e.json())).then((e=>e.data.damages.slice(2)))}}function l(e,t){const a=e-t;let n=0;18===t?n=-1:17===t?n=e>=16?0:-1:4===t?n=e<=5?0:1:3===t?n=1:a<=-10?n=-1:a>=10&&t<=7&&(n=1);let r=a>=0?"üü¢":"üî¥";return-1===n&&(r="üòñ"),1===n&&(r="üòé"),{MR:a,symbol:r,critical:n}}async function c(e,t=null){const a={method:"get"};return t&&(a.method="post",a.body=t),fetch(e,a).then((e=>e.json())).then((e=>e.data))}function i(e){let t=-1;for(let a=0;a<localStorage.length;a++){const n=localStorage.key(a);if(n.startsWith(e)){const e=parseInt(n.split("-")[1],10);!isNaN(e)&&e>t&&(t=e)}}return t}class p{static mountNewOpponent(e){const t=e[e.length-1],a=(0,n.e$)(t.dataset.opponent),r=new p(t.cloneNode(!0));r.setNumber(a+1),r.mount(t),localStorage.getItem(`opponent-${r.number}`)?r.importFromLocalStorage():r.reset()}static unmountLastOpponent(e){new p(e[e.length-1]).unmount()}constructor(e){this.opponentProps=["name","category","dex","san","pain-resistance","pdvm","pdv","members"],this.opponentSelects=t("[name=opponent-selector]"),this.wrapper=e,this.number=e.dataset.opponent,this.opponentProps.forEach((e=>this[e]=this.wrapper.querySelector(`[name=${e}]`)))}importFromLocalStorage(){const e=localStorage.getItem(`opponent-${this.number}`);if(e){const t=JSON.parse(e);this.opponentProps.forEach((e=>this[e].value=t[e]))}}save(){const e={};this.opponentProps.forEach((t=>e[t]=this[t].value)),localStorage.setItem(`opponent-${this.number}`,JSON.stringify(e))}reset(){this.opponentProps.forEach((e=>this[e].value="")),this.category.value="std",localStorage.removeItem(`opponent-${this.number}`),this.updateNameInOpponentSelectors()}addToOpponentSelectors(){this.opponentSelects.forEach((e=>{const t=a("option");t.value=this.number,t.innerText=""!==this.name.value?this.name.value:`Protagoniste ${this.number}`,e.appendChild(t)}))}updateNameInOpponentSelectors(){this.opponentSelects.forEach((e=>{e.options[this.number-1].innerText=""!==this.name.value?this.name.value:`Protagoniste ${this.number}`}))}setReactivity(){this.importFromLocalStorage(),this.addToOpponentSelectors(),this.wrapper.addEventListener("keyup",(e=>{"name"===e.target.name&&""===e.target.value?this.reset():this.save()})),this.category.addEventListener("change",(e=>this.save())),this.name.addEventListener("keyup",(e=>this.updateNameInOpponentSelectors())),this.name.dispatchEvent(new Event("keyup")),this.pdvm.addEventListener("blur",(e=>{""===this.pdv.value&&(this.pdv.value=this.pdvm.value)})),this.pdv.addEventListener("blur",(e=>{this.pdv.value=(0,n.Kf)(this.pdv.value),this.save()}))}setNumber(e){this.number=e,this.wrapper.dataset.opponent=e,this.wrapper.querySelector("[data-role=opponent-number]").innerText=e}mount(e){this.wrapper.classList.add("mt-¬Ω"),e.parentNode.insertBefore(this.wrapper,e.nextSibling),this.setReactivity()}unmount(){localStorage.removeItem(`opponent-${this.number}`),this.wrapper.remove(),this.opponentSelects.forEach((e=>e.children[this.number-1].remove()))}}function d(e,t,a){const s={};if(s.name=e.querySelector("[data-type=skill-name]"),s.number=s.name.dataset.skillNumber,s.score=e.querySelector("[data-type=score]"),s.modifier=e.querySelector("[data-type=modif]"),localStorage.getItem(`skill-${s.number}`)){const e=JSON.parse(localStorage.getItem(`skill-${s.number}`));s.name.value=e.name,s.score.value=e.score}["keyup","change"].forEach((t=>{e.addEventListener(t,(e=>{if(""===s.name.value)s.score.value="",localStorage.removeItem(`skill-${s.number}`);else{const e={name:s.name.value,score:s.score.value};localStorage.setItem(`skill-${s.number}`,JSON.stringify(e))}}))})),e.addEventListener("submit",(e=>{if(isNaN(parseInt(s.score.value))||""===s.name.value)return;const o=(0,n.e$)(s.modifier.value),c=(0,n.e$)(s.score.value)+o,i=r("3d").result,p=l(c,i),d=0===o?"":(0,n.Ie)(o);t.value+=`${s.name.value} (${s.score.value}${d}) ‚Üí ${i} (MR ${p.MR} ${p.symbol})`,a("chat-roll",p.symbol)}))}window.location.hostname;class u{constructor(e,t,a,n,r=[],s=null){this.sender=parseInt(e),this.key=t,this.type=a,this.timestamp=Date.now(),this.content=n,this.recipients=r,this.label=s}stringify(){return JSON.stringify(this)}}async function m(e,t=null){const a=window.chat.inputEntry,o=window.chat.id,c=window.chat.key,i=window.chat.ws,p=/^\/(\d+,){0,10}\d+/.exec(a.value);let d=[];p&&(d=p[0].substring(1).split(","),d=d.map((e=>parseInt(e))),a.value=a.value.replace(p[0],"").trim());const m=a.value.match(/#\d{1,2}([+-]\d{1,2})?(?=\s|$)/g),h=a.value.match(/#(\d+)d(\d{0,3})([+-/*]*)([0-9\.]+)*/g),v=a.value.match(/D(\d+)d(\d{0,3})([+-/*]*)([0-9\.]+)*/g);if(m){const e=[];m.forEach((t=>{e.push(t.replace("#",""))})),e.forEach((s=>{const o=r("3d").result,c=l((0,n.Kf)(s),o),i=`[ ${s} ‚Üí ${o} (MR ${c.MR} ${c.symbol}) ]`;a.value=a.value.replace(`#${s}`,i),1===e.length&&null===h&&(t=c.symbol)}))}if(h){const e=[];h.forEach((t=>{e.push(t.replace("#",""))})),e.forEach((e=>{const t=`[ ${e} ‚Üí ${r(e).result} ]`;a.value=a.value.replace(`#${e}`,t)}))}if(v){const e=[];v.forEach((t=>{e.push(t.replace("D",""))}));const t=e.map((async e=>{const t=`[ ${e} ‚Üí ${r(e).result} ‚Äì ${(await s())[1]} ]`;a.value=a.value.replace(`D${e}`,t)}));await Promise.all(t)}(m||h||v)&&(e="chat-roll");const b=new u(o,c,e,a.value,d,t);i.send(b.stringify()),a.value=""}const h=(0,n.e$)(e("#login-element").dataset.id),v=e("#msg-input"),b=t("fieldset[data-name]"),f=t("main form");let g=t("[data-role=opponent-wrapper]"),y=t("[data-name=score-tester] form");const $=e("[data-name=simple-roll] form"),w=e("[data-name=round-counter] form"),_=e("[data-name=widget-reaction] form"),S=e("[data-name=widget-damage-location] form"),E=e("[data-name=wound-effect] form"),k=e("[data-name=widget-criticals] form"),q=e("[data-name=widget-burst] form"),I=e("#general-state-widget"),L=e(["[data-name=fright-check] form"]),N=e(["[data-name=explosion-widget] form"]),x=e("#object-damages-widget"),M=e("#vehicle-collision-widget"),j=e("[data-name=npc-generator] form"),D=S.querySelector("[data-type=strength]"),O=S.querySelector("[data-type=weapon-code]"),P=S.querySelector("[data-type=hands]"),R=S.querySelector("[data-type=dice-code]"),F=E.querySelector("[data-type=dmg-type]"),T=E.querySelector("[data-type=bullet-type]"),J=e("[data-type=object-damages-object-type]"),C=e("[data-type=object-damages-localisation-options]");f.forEach((e=>{e.addEventListener("submit",(e=>e.preventDefault()))})),g.forEach((e=>{(e=new p(e)).setReactivity()})),t("[data-role=set-opponent-number]").forEach((e=>{e.addEventListener("click",(()=>{1===parseInt(e.value)?p.mountNewOpponent(g):g.length>1&&p.unmountLastOpponent(g),g=t("[data-role=opponent-wrapper]")}))}));const H=i("opponent");if(H>1){const t=e("[data-role=set-opponent-number][value='1']");for(let e=0;e<parseInt(H)-1;e++)t.click()}y.forEach((e=>d(e,v,m))),t("[data-role=set-score-number]").forEach((e=>{e.addEventListener("click",(()=>{1===(0,n.e$)(e.value)?function(e,t,a){const r=e[e.length-1],s=(0,n.e$)(r.querySelector("[data-skill-number]").dataset.skillNumber),o=r.cloneNode(!0);o.nameInput=o.querySelector("[data-skill-number]"),o.scoreInput=o.querySelector("[data-type=score]"),o.nameInput.dataset.skillNumber=s+1,o.nameInput.value="",o.scoreInput.value="",r.parentElement.appendChild(o),o.addEventListener("submit",(e=>e.preventDefault())),d(o,t,a)}(y,v,m):y.length>1&&function(e){const t=e[e.length-1],a=(0,n.e$)(t.querySelector("[data-skill-number]").dataset.skillNumber);t.remove(),localStorage.removeItem(`skill-${a}`)}(y),y=t("[data-name=score-tester] form")}))}));const z=i("skill");if(z>3){const t=e("[data-role=set-score-number][value='1']");for(let e=0;e<z-3;e++)t.click()}$.addEventListener("submit",(e=>{const t=r($.querySelector("[name=dice-expression]").value);v.value+=`${t.expression} ‚Üí ${t.result}`,m("chat-roll")})),w.addEventListener("submit",(e=>{e.preventDefault();const a=t("[data-role=opponent-wrapper]"),r=w.querySelector("[data-type=round-number]"),s=Math.max((0,n.e$)(r.value),1),o=w.querySelector("[data-type=initiative-order]");let l=o.value.match(/\d+/g);l=l||[],l=l.map(Number),l=l.filter((e=>e<=a.length&&e>=1&&Number.isInteger(e)));const c=l.map((e=>a[e-1].querySelector("[name=name]").value||`Protagoniste ${e}`));v.value+=`*Round ${s}* ‚Äì `,c.length?v.value+=`*Round ${s}* ‚Äì ${c.join(", ")}`:v.value+=o.value,m("chat-message"),r.value=s+1})),_.addEventListener("submit",(async e=>{const t=(0,n.e$)(_.querySelector("[data-type=reaction-modifier]").value.trim("+")),a=r("1d").result+t;let s=new FormData;s.append("reaction-test",a);let o=await c("/api/reaction-test",s);v.value+=`Jet de r√©action (${a}) ‚Üí ${o}`,m("chat-roll")})),D.addEventListener("keyup",(async e=>{const t=await o(D.value,O.value,P.value);void 0!==t&&(R.value=t)})),O.addEventListener("keyup",(async e=>{const t=await o(D.value,O.value,P.value);void 0!==t&&(R.value=t)})),P.addEventListener("change",(async e=>{const t=await o(D.value,O.value,P.value);void 0!==t&&(R.value=t)})),S.addEventListener("submit",(async e=>{const t=r(R.value),a=await s();E.querySelector("[data-type=raw-dmg]").value=t.result,E.querySelector("[data-type=localisation]").value=a[1],v.value+=`D√©g√¢ts (${t.expression})&nbsp;: ${t.result} ‚Äì ${a[0]}`,m("chat-roll")})),k.addEventListener("submit",(async e=>{const t=k.querySelector("[data-type=critical-categories]").value;let a=new FormData;a.append("table",t),a.append("roll-3d",r("3d").result),a.append("roll-1d",r("1d").result);const n=await c("/api/critical-tables",a);v.value+=`${n}`,m("chat-roll")})),q.addEventListener("submit",(async e=>{const t=q.querySelector("[data-type=rcl]").value,a=q.querySelector("[data-type=fired-bullets]").value,n=q.querySelector("[data-type=mr]").value,o=q.querySelector("[data-type=damage-dices]").value;let l=new FormData;l.append("rcl",t),l.append("bullets",a),l.append("mr",n);const c=await fetch("/api/burst-hits",{method:"post",body:l}).then((e=>e.json())).then((e=>e.data));let i=[];for(let e=0;e<c;e++){const e=r(o).result,t=await s();i.push(`${e} ‚Äì ${t}`)}let p=`<b>Rafale&nbsp;:</b> Rcl ${t} ‚Äì Balles ${a} ‚Äì MR ${n}`;i.forEach(((e,t)=>{p+=`<br><b>${t+1}.</b> ${e}`})),v.value+=p,m("chat-roll")})),I.addEventListener("submit",(async e=>{const t=I.querySelector("[name=opponent-selector]").value,a=new p(g[t-1]),n=new FormData;n.append("san",a.san.value),n.append("pdvm",a.pdvm.value),n.append("pdv",a.pdv.value),n.append("pain-resistance",a["pain-resistance"].value),n.append("members",a.members.value);const r=await c("/api/general-state",n);let s=`√âtat g√©n√©ral de <b>${a.name.value||"Protagoniste "+a.number}</b><br>${r.general}`;if(void 0!==r.members)for(const[e,t]of Object.entries(r.members))s+=`<br>${e}&nbsp;: ${t}`;r["members-error"]&&(s+="<br>Membres&nbsp;: donn√©es incoh√©rentes"),v.value+=s,m("chat-roll")})),E.addEventListener("submit",(async e=>{const t=E.querySelector("[name=opponent-selector]").value,a=new p(g[t-1]),n=r(E.querySelector("[data-type=raw-dmg]").value).result,s=E.querySelector("[data-type=rd]").value,o=E.querySelector("[data-type=dmg-type]").value,l=E.querySelector("[data-type=bullet-type]").value,i=E.querySelector("[data-type=localisation]").value,d=[];for(let e=0;e<7;e++)d.push(r("3d").result);const u=new FormData;u.append("category",a.category.value),u.append("dex",a.dex.value),u.append("san",a.san.value),u.append("pdvm",a.pdvm.value),u.append("pdv",a.pdv.value),u.append("pain-resistance",a["pain-resistance"].value),u.append("raw-dmg",n||0),u.append("rd",s||0),u.append("dmg-type",o),u.append("bullet-type",l),u.append("localisation",i),u.append("rolls",d);const h=await c("/api/wound-effects",u);if(h.erreur)return v.value+="Data opposants manquantes",void m("chat-roll");let b=`<b>${a.name.value||"Protagoniste "+a.number} ‚Äì ${h["d√©g√¢ts bruts"]} ( ${h["type d√©g√¢ts"]} ${h.localisation})</b>`,f=!0;b+=`<br>D√©g√¢ts effectifs&nbsp;: ${h["d√©g√¢ts effectifs"]}`,h.recul&&(b+=`<br>Recul de ${h.recul}&nbsp;m.`),h.mort&&(b+=`<br>${h.mort}`,f=!1),f&&(h["autres effets"]&&(b+=`<br>${h["autres effets"]}`),h["sonn√©"]&&!h["perte de conscience"]&&(b+=`<br>${h["sonn√©"]}`),h["perte de conscience"]&&(b+="<br>Le personnage perd conscience."),h.chute&&!h["perte de conscience"]&&(b+="<br>Le personnage ch√ªte."),h["d√©g√¢ts membre"]&&(b+=`<br>${h["d√©g√¢ts membre"]}`,""!==h["√©tat membre"]&&(b+=` (${h["√©tat membre"]})`))),v.value+=b,m("chat-roll"),a.pdv.value=h.pdv})),F.addEventListener("change",(e=>{["b0","b1","b2","b3"].includes(F.value)?T.disabled=!1:(T.value="std",T.disabled=!0)})),L.addEventListener("submit",(async e=>{const t=L.querySelector(["[data-type=fright-level]"]).value,a=(0,n.e$)(L.querySelector(["[data-type=sf-score]"]).value),s=(0,n.e$)(L.querySelector(["[data-type=sf-modif]"]).value),o=(0,n.e$)(L.querySelector(["[data-type=san-score]"]).value),i=a+s;if(a<=0||o<=0&&t>=5)return void e.preventDefault();const p=new FormData,d=l(i,r("3d").result),u=[];for(let e=0;e<=6;e++)u.push(r("3d").result);p.append("fright-level",t),p.append("sf-score",a),p.append("san-score",o),p.append("frightcheck-MR",d.MR),p.append("frightcheck-symbol",d.symbol),p.append("frightcheck-critical",d.critical),p.append("rolls",u.join(","));let h=await c("/api/fright-check",p);v.value=h,m("chat-roll",d.symbol)})),N.addEventListener("submit",(t=>{const a=e("[data-type=explosion-dmg]").value,n=e("[data-type=explosion-distance]").value,s=e("[data-type=explosion-frag-surface]").value,o=e("[data-type=explosion-frag-device]").checked,l=(r(a).result+r(a).result+r(a).result)/3*1.43,c=new FormData;c.append("damages",l),c.append("distance",n),c.append("fragmentation-surface",s),c.append("is-fragmentation-device",o),fetch("/api/explosion-damages",{method:"post",body:c}).then((e=>e.json())).then((e=>{const t=e.data,a=`<b>Explosion&nbsp;:</b> d√©g√¢ts ${t.damages} ‚Äì fragment(s) ${t.fragments} ‚Äì hauteur de chute ${t.height}&nbsp;m`;v.value+=a,m("chat-roll")}))})),J.addEventListener("change",(e=>{const t=new FormData;t.append("object-type",J.value),fetch("/api/object-localisation-options",{method:"post",body:t}).then((e=>e.json())).then((e=>{C.innerHTML="",e.data.forEach((e=>{e=e.charAt(0).toUpperCase()+e.slice(1);const t=a("option");t.innerText=e,C.appendChild(t)}))}))})),x.addEventListener("submit",(t=>{const a=e("[data-type=object-damages-pdsm]").value,n=e("[data-type=object-damages-pds]").value,s=e("[data-type=object-damages-integrite]").value,o=e("[data-type=object-damages-rd]").value,l=r(e("[data-type=object-damages-damages-code]").value).result;if(isNaN(parseInt(a))||isNaN(parseInt(s))||isNaN(parseInt(l)))return;const c=new FormData;c.append("pdsm",a),c.append("pds",n),c.append("integrite",s),c.append("rd",o),c.append("dmgValue",l),c.append("dmgType",e("[data-type=object-damages-damages-type]").value),c.append("objectType",J.value),c.append("localisation",C.value),c.append("rolls",[r("3d").result,r("3d").result,r("3d").result,r("3d").result]),fetch("/api/object-damages-effects",{method:"post",body:c}).then((e=>e.json())).then((t=>{const a=t.data;console.log(a),e("[data-type=object-damages-pds]").value=a.pds;let n=`\n\t\t\t\t<b>D√©g√¢ts ${a.objectType}</b><br>\n\t\t\t\tPdSm&nbsp;: ${a.pdsm} ‚Äì RD&nbsp;: ${a.rd}<br>\n\t\t\t\tD√©g√¢ts&nbsp;: ${a.netDamages} (${a.damagesLevel})<br>\n\t\t\t\tPdS restant&nbsp;: ${a.pds} (${a.stateLevel})\n\t\t\t`;if(a.sideEffects.length){n+="<br>";for(let e of a.sideEffects)n+=`‚Ä¢&nbsp;${e[0]} niv. ${e[1]}<br>`}v.value+=n,m("chat-roll")}))})),M.addEventListener("submit",(t=>{const a=parseInt(e("[data-type=vehicle-collision-pdsm]").value),n=e("[data-type=vehicle-collision-severity]"),s=parseInt(n.value),o=n.options[n.selectedIndex].innerText;if(!a)return;let l;switch(s){case 1:l=Math.round((15+r("3d").result)/100*a);break;case 2:l=Math.round((40+r("3d").result)/100*a);break;case 3:l=Math.round((90+r("3d").result)/100*a);break;case 4:l=Math.round((180+r("6d").result)/100*a);break;case 5:l="v√©hicule d√©truit";break;default:l=0}const c=`<b>Collision</b> ${o}&nbsp;: d√©g√¢ts ${l}`;v.value+=c,m("chat-roll")}));const A=j.querySelector("[name=region]");null!==localStorage.getItem("npc-region")&&(A.value=localStorage.getItem("npc-region")),j.addEventListener("change",(()=>{localStorage.setItem("npc-region",A.value)})),j.addEventListener("submit",(async e=>{const t=new FormData(j);let a=await c("/api/npc-generator",t);if(v.value=`/${h} `,a.error)return v.value+="Param√®tres PNJ invalides",void m("chat-roll");if(a["name-only"])return v.value+=a.name,void m("chat-roll");const n=a.facialHair?`${a.facialHair},`:"",r="moyenne"!==a.corpulence?`${a.corpulence}, `:"",s="moyenne"!==a.size?`${a.size}, `:"",o="moyenne"!==a.beauty?`${a.beauty}, `:"",l="moyenne"!==a.intelligence?`${a.intelligence}, `:"",i=a.specialTraits?`<br>Choisir une particularit√© parmi&nbsp;: <i>${a.specialTraits}</i>`:"";v.value+=`\n\t\t<b>${a.name}</b><br>\n\t\t${a.hair},\n\t\t${n}\n\t\tyeux ${a.eyes},\n\t\t${r}\n\t\t${s}\n\t\t${o}\n\t\t${l}\n\t\t${a.social}\n\t\t${i}\n\t`,m("chat-roll")}));const B=e("[data-role=widget-choices]"),K=e("[data-role=widget-choices] template"),W=JSON.parse(localStorage.getItem("display-widgets"))||{"simple-roll":!0,"score-tester":!0,"widget-damage-location":!0,"widget-criticals":!0};function U(){b.forEach((e=>e.hidden=!W[e.dataset.name]))}b.forEach((e=>{const t=K.content.cloneNode(!0),a=t.querySelector("input");a.dataset.name=e.dataset.name,W[e.dataset.name]&&(a.checked=!0),a.addEventListener("change",(e=>{W[a.dataset.name]=a.checked,localStorage.setItem("display-widgets",JSON.stringify(W)),U()})),t.querySelector("span").innerHTML=e.querySelector("legend").childNodes[0].textContent.trim(),B.appendChild(t)})),U()})()})();